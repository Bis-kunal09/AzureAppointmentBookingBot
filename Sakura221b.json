{
 "name": "Sakura221b",
 "id": "44238f2e-cc3a-4d4d-9722-16b27a09b1c0",
 "scenario_trigger": "Sakura221b",
 "description": "Help User to Schedule an appointment",
 "active": true,
 "updated": "2022-01-31T11:16:28.343Z",
 "userDisplayName": "Kunal Bisht",
 "code": "{\"version\":3,\"steps\":[{\"id\":\"4676f5c0f77c-ec78307880be5a9a-d793\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":300,\"yLocation\":11,\"next\":\"a291d882f045-dc43d4d11d6f3ded-8d8d\"},\"text\":\"Welcome to the Imaging department at AZURE HEALTHBOT HEALTH SERVICES!  \",\"variable\":\"Consent\",\"stringId\":\"stringId_0cc175b9c0f1b6a8\",\"layout\":\"vertical\",\"label\":\"Notice\"},{\"id\":\"a291d882f045-dc43d4d11d6f3ded-8d8d\",\"type\":\"prompt\",\"dataType\":\"['Yes', 'No']\",\"designer\":{\"xLocation\":300,\"yLocation\":80,\"listStyle\":3,\"next\":\"9ec4f8beae25-c4b4a989620942c7-e56a\"},\"text\":\"\\r\\n\\r\\nMay I help you schedule an appointment for one of our HealthServices?   \",\"variable\":\"userConsent\",\"choiceType\":\"choice\",\"stringId\":\"stringId_518d5658a0ba0441\",\"label\":\"Welcome\"},{\"id\":\"20737162a687-2f88f90ae4ff837e-e760\",\"type\":\"action\",\"label\":\"serviceTypes\",\"designer\":{\"xLocation\":394,\"yLocation\":220,\"next\":\"029e12761327-6763f043cf49e6cf-8fba\"},\"onInit\":\"scenario.availableServiceTypes = {\\r\\n    \\\"Breast Screen\\\": {\\r\\n        \\\"code\\\": \\\"272\\\"\\r\\n    },\\r\\n    \\\"Computed Tomography Scan (CT)\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    },\\r\\n    \\\"Fluoroscopy\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    },\\r\\n    \\\"Nuclear Medicine\\\": {\\r\\n        \\\"code\\\": \\\"212\\\"\\r\\n    },\\r\\n    \\\"Diagnostic Ultrasound\\\": {\\r\\n        \\\"code\\\": \\\"210\\\"\\r\\n    },\\r\\n    \\\"X-Ray\\\": {\\r\\n        \\\"code\\\": \\\"209\\\"\\r\\n    }\\r\\n};\",\"visible\":true,\"async\":false},{\"id\":\"029e12761327-6763f043cf49e6cf-8fba\",\"type\":\"prompt\",\"dataType\":\"scenario.availableServiceTypes\",\"designer\":{\"xLocation\":390,\"yLocation\":300,\"listStyle\":3,\"next\":\"a4cd62f4eb68-a23ce3da2e73a626-eb44\"},\"text\":\"Please select a service from the below list:\",\"variable\":\"selectedServiceType\",\"stringId\":\"stringId_c1bc631fae12f7df\",\"choiceType\":\"choice\",\"label\":\"Select type\"},{\"id\":\"98f942e5014a-f5622096aa0f267b-d372\",\"type\":\"datasource\",\"designer\":{\"xLocation\":389,\"yLocation\":820,\"next\":\"dd09d52444f0-6127784ad52de326-2f2d\",\"errorStepId\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"dataConnection\":\"FHIR server for appointment scheduling\",\"urlPath\":\"/Slot\",\"urlParams\":\"`schedule=${scenario.selectedSchedule.id}`\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"availableSlotsReponse\",\"label\":\"Get slots\",\"fhirAction\":\"Read\",\"fhirResource\":\"Slot\",\"payload\":\"/* fill the missing fields */\\nFHIR({\\n  \\\"resourceType\\\": \\\"Slot\\\"\\n});\"},{\"id\":\"a4cd62f4eb68-a23ce3da2e73a626-eb44\",\"type\":\"action\",\"label\":\"Get code\",\"designer\":{\"xLocation\":393,\"yLocation\":380,\"next\":\"c74bda4834c5-f57e6d647ff3f52b-5138\"},\"onInit\":\"scenario.selectedServiceTypeCode = scenario.availableServiceTypes[scenario.selectedServiceType.entity].code;\",\"visible\":true,\"async\":false},{\"id\":\"7ac438cb489c-4e926184a815dc4c-bf64\",\"type\":\"statement\",\"designer\":{\"xLocation\":110,\"yLocation\":280},\"text\":\"If you have any further questions, please don’t hesitate to contact me.\",\"stringId\":\"stringId_7dd2bb2c580ab0dc\"},{\"id\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\",\"type\":\"statement\",\"designer\":{\"xLocation\":252,\"yLocation\":740},\"text\":\"I was not able to find open slots, please try again later.\",\"stringId\":\"stringId_761a6f4fd3c3d1f5\"},{\"id\":\"c74bda4834c5-f57e6d647ff3f52b-5138\",\"type\":\"statement\",\"designer\":{\"xLocation\":389,\"yLocation\":460,\"next\":\"6ac2ba046181-2526d0a87345aea7-13d5\"},\"text\":\"Got it! I will be happy to assist you in with setting it up.\",\"stringId\":\"stringId_4dd88f65fad5af0a\",\"label\":\"\"},{\"id\":\"6ac2ba046181-2526d0a87345aea7-13d5\",\"type\":\"datasource\",\"designer\":{\"xLocation\":390,\"yLocation\":540,\"next\":\"2a1eadce992a-abaa0e7818423d4e-e03f\",\"errorStepId\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"dataConnection\":\"FHIR server for appointment scheduling\",\"urlPath\":\"/Schedule\",\"urlParams\":\"`service-type=${scenario.selectedServiceTypeCode}`\",\"method\":\"get\",\"headers\":\"\",\"opJson\":true,\"opResolveWithFullResponse\":false,\"response\":\"availableSchedulesResponse\",\"label\":\"Get schedules\",\"fhirAction\":\"Read\",\"fhirResource\":\"Schedule\",\"payload\":\"/* fill the missing fields */\\nFHIR({\\n  \\\"resourceType\\\": \\\"Schedule\\\"\\n});\"},{\"id\":\"ea07d46be4a3-795e5641bde518d2-2058\",\"type\":\"prompt\",\"dataType\":\"scenario.availableSlots\",\"designer\":{\"xLocation\":390,\"yLocation\":1090,\"listStyle\":3,\"next\":\"5dc09ed97398-ffed6e2f5572de0a-29bd\"},\"text\":\"Please select a date and time for your appointment: \",\"variable\":\"selectedSlotStartText\",\"stringId\":\"stringId_ff87f72cb613eda7\",\"choiceType\":\"choice\",\"label\":\"Time\"},{\"id\":\"dd09d52444f0-6127784ad52de326-2f2d\",\"type\":\"action\",\"label\":\"Available slots\",\"designer\":{\"xLocation\":393,\"yLocation\":900,\"next\":\"ac43e93ecc06-027530b882db2982-c6be\"},\"onInit\":\"scenario.availableSlots = {};\\r\\nscenario.availableSlotsReponse.entry.map(entry => entry.resource).forEach(resource => {\\r\\n    const date = new Date(resource.start);\\r\\n    const dateText = moment(date).format(\\\"dddd, MMMM Do YYYY, h:mm A\\\");\\r\\n    scenario.availableSlots[dateText] = {\\r\\n        slot: resource\\r\\n    };\\r\\n});\"},{\"id\":\"2a1eadce992a-abaa0e7818423d4e-e03f\",\"type\":\"action\",\"label\":\"Selected schedule\",\"designer\":{\"xLocation\":394,\"yLocation\":629,\"next\":\"98bf84566402-e951c9d55729919f-fd24\"},\"onInit\":\"scenario.availableSchedules = [];\\r\\nif (scenario.availableSchedulesResponse && scenario.availableSchedulesResponse.entry) {\\r\\n    scenario.availableSchedules = scenario.availableSchedulesResponse.entry.map(entry => entry.resource);\\r\\n}\\r\\nif (scenario.availableSchedules.length > 0) {\\r\\n    // assuming there is one schedule for each service type we set the first one on selectedSchedule\\r\\n    scenario.selectedSchedule = scenario.availableSchedules[0];\\r\\n}\"},{\"id\":\"0b62df6d1715-fb66f7d01f91b68d-129d\",\"type\":\"statement\",\"designer\":{\"xLocation\":388,\"yLocation\":1451,\"next\":\"de992ea4b8ab-8eca4164be591f19-14c2\"},\"text\":\"\\\"Thank you, \\\" + scenario.createPatientInfo.firstName +\\r\\n\\\". I've scheduled an appointment for \\\" + scenario.selectedSlotStartText.entity + \\r\\n\\r\\n\\\". \\\\n We look forward to seeing you then.\\\"\",\"stringId\":\"stringId_710a1cd7b9ae8851\",\"label\":\"Summary\"},{\"id\":\"5dc09ed97398-ffed6e2f5572de0a-29bd\",\"type\":\"action\",\"label\":\"Selected slot\",\"designer\":{\"xLocation\":394,\"yLocation\":1147,\"next\":\"082bd2f96d15-9cef06455edd8425-f7ea\"},\"onInit\":\"scenario.selectedSlot = scenario.availableSlots[scenario.selectedSlotStartText.entity].slot\"},{\"id\":\"98bf84566402-e951c9d55729919f-fd24\",\"type\":\"branch\",\"condition\":\"scenario.selectedSchedule != null && scenario.selectedSchedule.id\",\"designer\":{\"xLocation\":400,\"yLocation\":728,\"next\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"label\":\"Verification\",\"targetStepId\":\"98f942e5014a-f5622096aa0f267b-d372\"},{\"id\":\"ac43e93ecc06-027530b882db2982-c6be\",\"type\":\"branch\",\"condition\":\"Object.keys(scenario.availableSlots).length > 0\",\"designer\":{\"xLocation\":400,\"yLocation\":1000,\"next\":\"2f9ad59f5d8d-db37c9a2f31b7797-e4b8\"},\"label\":\"Verification\",\"targetStepId\":\"ea07d46be4a3-795e5641bde518d2-2058\"},{\"id\":\"9ec4f8beae25-c4b4a989620942c7-e56a\",\"type\":\"branch\",\"condition\":\"scenario.userConsent.entity === 'Yes'\",\"designer\":{\"xLocation\":247,\"yLocation\":280,\"next\":\"7ac438cb489c-4e926184a815dc4c-bf64\"},\"targetStepId\":\"15444a2df05e-e1e5fee5fed6ecee-49fd\",\"label\":\"Consent\"},{\"id\":\"0eea354a555b-c4421351c96263ab-faa5\",\"type\":\"prompt\",\"dataType\":\"object\",\"designer\":{\"xLocation\":388,\"yLocation\":1386,\"next\":\"0b62df6d1715-fb66f7d01f91b68d-129d\"},\"variable\":\"createPatientInfo\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n  \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n  \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n  \\\"version\\\": \\\"1.0\\\",\\r\\n  \\\"body\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Name:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"First name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"firstName\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Text\\\",\\r\\n      \\\"placeholder\\\": \\\"Last Name\\\",\\r\\n      \\\"style\\\": \\\"text\\\",\\r\\n      \\\"maxLength\\\": 0,\\r\\n      \\\"id\\\": \\\"lastName\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Gender:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.ChoiceSet\\\",\\r\\n      \\\"isMultiSelect\\\": false,\\r\\n      \\\"id\\\": \\\"gender\\\",\\r\\n      \\\"style\\\": \\\"expanded\\\",\\r\\n      \\\"value\\\": \\\"female\\\",\\r\\n      \\\"choices\\\": [\\r\\n        {\\r\\n          \\\"title\\\": \\\"Female\\\",\\r\\n          \\\"value\\\": \\\"female\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"Male\\\",\\r\\n          \\\"value\\\": \\\"male\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"title\\\": \\\"Other\\\",\\r\\n          \\\"value\\\": \\\"other\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"TextBlock\\\",\\r\\n      \\\"text\\\": \\\"Date of birth:\\\"\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"Input.Date\\\",\\r\\n      \\\"placeholder\\\": \\\"Date of birth\\\",\\r\\n      \\\"id\\\": \\\"birthDate\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Mobile phone number:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"mobilePhone\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Home phone number:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"homePhone\\\",\\r\\n        \\\"style\\\": \\\"tel\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"TextBlock\\\",\\r\\n        \\\"text\\\": \\\"Email address:\\\"\\r\\n    },\\r\\n    {\\r\\n        \\\"type\\\": \\\"Input.Text\\\",\\r\\n        \\\"id\\\": \\\"email\\\",\\r\\n        \\\"style\\\": \\\"email\\\"\\r\\n    }\\r\\n    ],\\r\\n  \\\"actions\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"Action.Submit\\\",\\r\\n      \\\"title\\\": \\\"Schedule appointment\\\"\\r\\n    }\\r\\n  ]\\r\\n}\"}],\"stringId\":\"stringId_ebf12d1f053c2ba9\",\"label\":\"Registration\"},{\"id\":\"bd1956fd4413-ea58382b854b01ad-418f\",\"type\":\"statement\",\"designer\":{\"xLocation\":389,\"yLocation\":1311,\"next\":\"0eea354a555b-c4421351c96263ab-faa5\"},\"text\":\"Thank you. Let me take your information before scheduling the appointment.\",\"stringId\":\"stringId_645f17048c018277\",\"label\":\"Thanks\"},{\"id\":\"082bd2f96d15-9cef06455edd8425-f7ea\",\"type\":\"statement\",\"designer\":{\"xLocation\":389,\"yLocation\":1240,\"next\":\"bd1956fd4413-ea58382b854b01ad-418f\"},\"text\":\"Developer notice:\",\"stringId\":\"stringId_ac972b5d0738e76d\",\"layout\":\"vertical\",\"attachment\":[{\"type\":\"AdaptiveCard\",\"cardCode\":\"{\\r\\n    \\\"type\\\": \\\"AdaptiveCard\\\",\\r\\n    \\\"$schema\\\": \\\"http://adaptivecards.io/schemas/adaptive-card.json\\\",\\r\\n    \\\"version\\\": \\\"1.0\\\",\\r\\n    \\\"body\\\": [\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"The following registration form is used for demo purposes only and does not submit personal information to the FHIR server.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        },\\r\\n        {\\r\\n            \\\"type\\\": \\\"TextBlock\\\",\\r\\n            \\\"text\\\": \\\"Once a private FHIR server is implemented, connect the registration form to the disabled data connection steps to implement patient handling and appointment scheduling.\\\",\\r\\n            \\\"wrap\\\": true\\r\\n        }\\r\\n    ]\\r\\n}\"}],\"label\":\"Notice\"},{\"id\":\"de992ea4b8ab-8eca4164be591f19-14c2\",\"type\":\"prompt\",\"dataType\":\"[systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_yes\\\"], systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_no\\\"]]\",\"designer\":{\"xLocation\":611,\"yLocation\":1308,\"listStyle\":3,\"next\":\"53dd66a4a80c-f0adc4ad998d3372-98df\"},\"text\":\"systemLocalizedStrings[\\\"/builtin/feedback.triage_prompt_question\\\"]\",\"variable\":\"show_feedback\",\"submitTitle\":\"Submit\",\"label\":\"Show feedback\",\"stringId\":\"stringId_1fd8f056fd6c7478\",\"choiceType\":\"choice\"},{\"id\":\"53dd66a4a80c-f0adc4ad998d3372-98df\",\"type\":\"branch\",\"condition\":\"// Evaluate whether the user agreed to provide feedback\\r\\n\\r\\nscenario.show_feedback.index == 0\",\"designer\":{\"xLocation\":620,\"yLocation\":1369},\"targetStepId\":\"a6f03f78ad57-f93d255a602a4477-458b\"},{\"id\":\"a6f03f78ad57-f93d255a602a4477-458b\",\"type\":\"beginScenario\",\"designer\":{\"xLocation\":620,\"yLocation\":1451},\"scenario\":\"/builtin/feedback\"},{\"id\":\"15444a2df05e-e1e5fee5fed6ecee-49fd\",\"type\":\"prompt\",\"dataType\":\"string\",\"designer\":{\"xLocation\":300,\"yLocation\":180,\"next\":\"20737162a687-2f88f90ae4ff837e-e760\"},\"text\":\"Please enter \\\"vitals\\\" as your response.If already entered,Please enter \\\"N/A\\\"\",\"variable\":\"Vitals\",\"submitTitle\":\"Submit\",\"stringId\":\"stringId_03487c052d9c8ac3\",\"label\":\"Vitals\"}],\"breaking\":false,\"interrupting\":false,\"returningMessage\":\"Hello\"}"
}